<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
    <head>
        <meta charset="UTF-8">
        <title th:text="${pageTitle ?: 'SSR Application'}">SSR Application</title>

        <!-- Primary SEO-->
        <meta name="description" th:content="${metaDescription ?: 'Demo SSR Spring Application with Thymeleaf.'}">
        <meta name="robots" th:content="${metaRobots ?: 'index,follow'}">

        <!-- Canonical -->
        <link rel="canonical" th:href="${canonicalUrl}" />

        <!-- Open Graph settings -->
        <meta property="og:type" content="website">
        <meta property="og:title" th:content="${ogTitle ?: pageTitle ?: 'SSR Application'}">
        <meta property="og:description" th:content="${ogDescription ?: metaDescription ?: 'Demo SSR Application with Spring Boot and Thymeleaf.'}">
        <meta property="og:url" th:content="${canonicalUrl}">
        <meta property="og:image" th:content="${ogImage ?: '/images/og-default.png'}">

        <!-- Twitter settings -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" th:content="${twitterTitle ?: pageTitle ?: 'SSR Application'}">
        <meta name="twitter:description" th:content="${twitterDescription ?: metaDescription ?: 'Demo SSR Application with Spring Boot and Thymeleaf.'}">
        <meta name="twitter:image" th:content="${twitterImage ?: '/images/og-default.png'}">

        <!-- fonts and styles -->
        <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
        <link rel="stylesheet" th:href="@{/styles.css}">
    </head>
    <body>
		<div id="toast" class="toast"
            th:classappend="${successMessage} ? ' toast-success show' : ''"
            th:if="${successMessage}"
            th:text="${successMessage}"
        ></div>

        <div id="toast-error" class="toast"
            th:classappend="${errorMessage} ? ' toast-error show' : ''"
            th:if="${errorMessage}"
            th:text="${errorMessage}"
        ></div>

        <div id="toast-warning" class="toast"
            th:classappend="${warningMessage} ? ' toast-warning show' : ''"
            th:if="${warningMessage}"
            th:text="${warningMessage}"
        ></div>

        <div id="toast-info" class="toast"
            th:classappend="${infoMessage} ? ' toast-info show' : ''"
            th:if="${infoMessage}"
            th:text="${infoMessage}"
        ></div>

        <div th:replace="~{fragments/header :: header}"></div>

        <main layout:fragment="content">
            <p>Main layout content</p>
        </main>

        <div th:replace="~{fragments/footer :: footer}"></div>
		<script>
            document.addEventListener('DOMContentLoaded', function() {
                const toastIds = [
                    'toast-success',
                    'toast-error',
                    'toast-warning',
                    'toast-info'
                ];

                toastIds.forEach(id => {
                    if (toast) {
                        toast.classList.add('show');
                        setTimeout(() => toast.classList.remove('show'), 3000);
                    }
                });
            });
		</script>
    </body>
</html>
